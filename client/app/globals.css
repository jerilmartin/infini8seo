@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Background: clean dark */
    --background: 225 15% 8%;
    /* Primary text: near white */
    --foreground: 0 0% 93%;
    /* Card surfaces */
    --card: 225 12% 11%;
    --card-foreground: 0 0% 93%;
    --card-elevated: 225 10% 13%;
    /* Primary accent - purple for CTAs only */
    --primary: 263 55% 58%;
    --primary-foreground: 0 0% 100%;
    /* Secondary text: readable gray */
    --secondary: 225 10% 16%;
    --secondary-foreground: 0 0% 70%;
    /* Muted */
    --muted: 225 10% 18%;
    --muted-foreground: 0 0% 50%;
    /* Input surfaces */
    --input: 225 10% 14%;
    --input-highlight: 225 8% 16%;
    /* Other */
    --destructive: 0 55% 50%;
    --border: 225 8% 20%;
    --ring: 263 50% 55%;
    --radius: 0.5rem;
    /* Preview titles */
    --preview-title: 0 0% 96%;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-manrope), system-ui, sans-serif;
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50;
  }

  .btn-primary {
    @apply btn bg-primary text-primary-foreground hover:bg-primary/90 h-11 px-6;
  }

  .btn-secondary {
    @apply btn bg-secondary text-secondary-foreground hover:bg-muted h-10 px-5 border border-border;
  }

  .btn-ghost {
    @apply btn hover:bg-secondary h-9 px-3 text-secondary-foreground;
  }

  /* Cards with distinct surfaces */
  .card {
    @apply rounded-lg border border-border/50 bg-card p-5;
  }

  .card-elevated {
    @apply rounded-lg bg-[hsl(var(--card-elevated))] p-6;
  }

  /* Panel - subtle flat background */
  .panel {
    @apply rounded-xl bg-card/60 p-8;
  }

  /* Inputs - distinct surface, not transparent */
  .input {
    @apply flex h-11 w-full rounded-md border border-border/60 bg-input px-4 py-2 text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring/60 focus:border-ring/60 transition-colors;
  }

  /* Primary inputs - more prominent */
  .input-highlight {
    @apply input bg-[hsl(var(--input-highlight))] border-border/80;
  }

  .select {
    @apply input appearance-none cursor-pointer pr-10;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
    background-position: right 10px center;
    background-repeat: no-repeat;
  }

  /* Typography hierarchy - deliberate contrast levels */
  .text-title {
    @apply text-foreground font-semibold;
  }

  .text-preview-title {
    color: hsl(var(--preview-title));
    @apply font-semibold leading-relaxed;
  }

  .text-label {
    @apply text-[11px] font-medium text-foreground uppercase tracking-widest;
  }

  .text-meta {
    @apply text-[12px] text-muted-foreground/70;
  }

  .text-quiet {
    @apply text-secondary-foreground;
  }

  /* Preview column - editorial reading width */
  .preview-column {
    max-width: 52ch;
  }

  .badge {
    @apply inline-flex items-center rounded px-2 py-0.5 text-xs font-medium;
  }

  .badge-default {
    @apply badge bg-secondary text-secondary-foreground;
  }

  .badge-primary {
    @apply badge bg-primary/15 text-primary;
  }

  .badge-success {
    @apply badge bg-emerald-500/15 text-emerald-400;
  }

  .divider {
    @apply border-t border-border/50 my-5;
  }
}

/* Range slider */
input[type="range"] {
  @apply w-full h-1 rounded-full appearance-none cursor-pointer;
  background: hsl(var(--secondary));
}

input[type="range"]::-webkit-slider-thumb {
  @apply appearance-none w-3.5 h-3.5 rounded-full bg-foreground cursor-pointer;
}

input[type="range"]::-moz-range-thumb {
  @apply w-3.5 h-3.5 rounded-full bg-foreground cursor-pointer border-0;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-border rounded-full;
}

/* Number input spinner removal */
.no-spinner::-webkit-outer-spin-button,
.no-spinner::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Markdown content - Editorial reading experience */
.markdown-content h1 { @apply text-xl font-semibold mb-4 text-foreground; }
.markdown-content h2 { @apply text-lg font-semibold mb-3 mt-6 text-foreground; }
.markdown-content h3 { @apply text-base font-medium mb-2 mt-4 text-foreground; }
.markdown-content p { @apply mb-3 text-secondary-foreground leading-relaxed text-sm; }
.markdown-content ul, .markdown-content ol { @apply mb-3 ml-4 text-secondary-foreground text-sm; }
.markdown-content li { @apply mb-1; }
.markdown-content code { @apply bg-secondary px-1 py-0.5 rounded text-xs; }
.markdown-content blockquote { @apply border-l-2 border-border pl-3 italic text-muted-foreground my-3; }
.markdown-content table { @apply w-full mb-4 text-sm; }
.markdown-content th { @apply bg-secondary text-left p-2 font-medium; }
.markdown-content td { @apply p-2 border-t border-border; }
.markdown-content mark { @apply bg-primary/15 text-foreground px-0.5 rounded; }
.markdown-content hr { @apply border-border my-6; }

/* Prose content - Optimized for long-form reading */
.prose-content {
  @apply text-[15px] leading-[1.75] text-secondary-foreground;
}
.prose-content h1 { 
  @apply text-[22px] font-medium text-foreground mt-10 mb-4 leading-tight; 
}
.prose-content h2 { 
  @apply text-[18px] font-medium text-foreground mt-8 mb-3 leading-snug; 
}
.prose-content h3 { 
  @apply text-[16px] font-medium text-foreground mt-6 mb-2 leading-snug; 
}
.prose-content p { 
  @apply mb-4 text-secondary-foreground; 
}
.prose-content ul, .prose-content ol { 
  @apply mb-4 ml-5 text-secondary-foreground space-y-1.5; 
}
.prose-content li { 
  @apply leading-relaxed; 
}
.prose-content li::marker {
  @apply text-muted-foreground;
}
.prose-content strong {
  @apply font-medium text-foreground;
}
.prose-content em {
  @apply italic;
}
.prose-content a {
  @apply text-foreground underline underline-offset-2 decoration-border hover:decoration-foreground transition-colors;
}
.prose-content code { 
  @apply bg-secondary/60 px-1.5 py-0.5 rounded text-[13px] font-mono; 
}
.prose-content pre {
  @apply bg-secondary/40 rounded-lg p-4 overflow-x-auto mb-4;
}
.prose-content pre code {
  @apply bg-transparent p-0;
}
.prose-content blockquote { 
  @apply border-l-2 border-border/60 pl-4 my-4 text-muted-foreground italic; 
}
.prose-content table { 
  @apply w-full mb-4 text-[14px]; 
}
.prose-content th { 
  @apply bg-card text-left p-3 font-medium text-foreground border-b border-border; 
}
.prose-content td { 
  @apply p-3 border-b border-border/50 text-secondary-foreground; 
}
.prose-content mark { 
  @apply bg-primary/10 text-foreground px-1 rounded; 
}
.prose-content hr { 
  @apply border-border/50 my-8; 
}
.prose-content img {
  @apply rounded-lg my-4;
}

/* Animations */
@keyframes fade-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fade-in 0.4s ease-out forwards;
}

/* Select options */
select option {
  @apply bg-card text-foreground;
}
